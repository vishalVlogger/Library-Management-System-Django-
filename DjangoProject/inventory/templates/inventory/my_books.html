{% extends "inventory/base.html" %} {% load tz %} {% block content %}
<h2 class="text-center my-4">ðŸ“š My Books</h2>

<table class="table table-striped table-bordered text-center align-middle">
  <thead class="table-dark">
    <tr>
      <th>#</th>
      <th>Book Title</th>
      <th>Type</th>
      <th>Quantity</th>
      <th>Issue Date</th>
      <th>Return Date</th>
      <th>Status</th>
      <th>Action</th>
    </tr>
  </thead>
  <tbody>
    {% for txn in transactions %}
    <tr>
      <td>{{ forloop.counter }}</td>
      <td>{{ txn.book.title }}</td>

      <td>
        {% if txn.transaction_type == 'ISSUE' %}
        <span class="badge bg-warning text-dark">Issued</span>
        {% else %}
        <span class="badge bg-success">Returned</span>
        {% endif %}
      </td>

      <td>{{ txn.quantity }}</td>

      <td>
        {% if txn.issue_date %} {{ txn.issue_date|localtime|date:"d M Y, H:i" }} {% else %} &mdash; {% endif %}
      </td>

      <td>
        {% if txn.return_date %} {{ txn.return_date|localtime|date:"d M Y, H:i" }} {% else %} &mdash; {% endif %}
      </td>

      <td>
        {% if txn.transaction_type == 'RETURN' %}
        <span class="text-success fw-bold">Returned</span>
        {% else %}
        <span class="text-danger fw-bold">Not Returned</span>
        {% endif %}
      </td>

      <td>
        {% if txn.transaction_type != 'RETURN' %}
        <a
          class="btn btn-sm btn-primary"
          href="{% url 'inventory:return_book' txn.id %}"
          >Return</a
        >
        {% else %} Returned {% endif %}
      </td>
    </tr>
    {% empty %}
    <tr>
      <td colspan="8" class="text-center">No transactions found.</td>
    </tr>
    {% endfor %}
  </tbody>
</table>

<div class="text-center mt-4">
  <a href="{% url 'inventory:book_list' %}" class="btn btn-secondary"
    >â¬… Back to Book List</a
  >
</div>
{% endblock %}